'use strict';

var path = require('path');

/*
* Sanitize name and resolve it to prevent directory traversal.
* @param {string} name - The name to make safe.
* @return {string} path - The safe filename.
* @private
*/
function safeFilename(name) {
	var camelCaseName = name.toLowerCase().replace(/(?:\s)[a-z]/g, function (m) {
		return m.toUpperCase().trim();
	});
	var traversal = path.relative(path.sep, path.join(path.sep, camelCaseName));
	var safe = traversal.replace(/[/,?,<,>,\\,:,*,|,",']/g, '');
	return path.relative(path.sep, path.join(path.sep, safe));
}

exports = module.exports = {
	safeFilename: safeFilename
};